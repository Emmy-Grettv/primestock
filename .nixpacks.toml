[phases.setup]
# Use specific nixpkg names for better reliability
packages = ["php82", "php82Packages.composer", "nodejs_22"]

[phases.build]
# Standard Laravel build steps with HTTPS enforcement and cache clear
cmds = ["composer install --no-dev --optimize-autoloader", "npm install", "npm run build", "php artisan config:cache", "php artisan route:cache"]

[phases.start]
cmd = "php artisan serve --host=0.0.0.0 --port=$PORT"